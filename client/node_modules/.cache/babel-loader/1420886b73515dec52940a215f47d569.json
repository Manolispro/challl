{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\30693\\\\Desktop\\\\challl\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\30693\\\\Desktop\\\\challl\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\30693\\\\Desktop\\\\challl\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import AuthService from'../Services/AuthService';import Message from'../Components/Message';import{AuthContext}from'../Context/AuthContext';var Login=function Login(props){var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var authContext=useContext(AuthContext);var onChange=function onChange(e){setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));};var onSubmit=function onSubmit(e){e.preventDefault();AuthService.login(user).then(function(data){console.log(data);var isAuthenticated=data.isAuthenticated,user=data.user,message=data.message;if(isAuthenticated){authContext.setUser(user);authContext.setIsAuthenticated(isAuthenticated);props.history.push('/registerd');}else setMessage(message);});};return/*#__PURE__*/React.createElement(\"div\",{class:\"register\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"h3\",null,\"Please sign in\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"username\",className:\"sr-only\"},\"Username: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"username\",onChange:onChange,className:\"form-control\",placeholder:\"Enter Username\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\",className:\"sr-only\"},\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",onChange:onChange,className:\"form-control\",placeholder:\"Enter Password\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-lg btn-primary btn-block\",type:\"submit\"},\"Log in \")),message?/*#__PURE__*/React.createElement(Message,{message:message}):null);};export default Login;","map":{"version":3,"sources":["C:/Users/30693/Desktop/challl/client/src/Components/Login.js"],"names":["React","useState","useContext","AuthService","Message","AuthContext","Login","props","username","password","user","setUser","message","setMessage","authContext","onChange","e","target","name","value","onSubmit","preventDefault","login","then","data","console","log","isAuthenticated","setIsAuthenticated","history","push"],"mappings":"8XAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAwBC,UAAxB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,WAAP,KAAwB,yBAAxB,CACC,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACD,OAAQC,WAAR,KAA0B,wBAA1B,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAAAC,KAAK,CAAE,eACMN,QAAQ,CAAC,CAACO,QAAQ,CAAE,EAAX,CAAeC,QAAQ,CAAG,EAA1B,CAAD,CADd,wCACVC,IADU,eACLC,OADK,8BAEYV,QAAQ,CAAC,IAAD,CAFpB,yCAEVW,OAFU,eAEFC,UAFE,eAGjB,GAAMC,CAAAA,WAAW,CAAGZ,UAAU,CAACG,WAAD,CAA9B,CAEA,GAAMU,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,CAAC,CAAG,CACjBL,OAAO,gCAAKD,IAAL,wBAAWM,CAAC,CAACC,MAAF,CAASC,IAApB,CAA4BF,CAAC,CAACC,MAAF,CAASE,KAArC,GAAP,CACH,CAFD,CAIA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAJ,CAAC,CAAG,CACjBA,CAAC,CAACK,cAAF,GACAlB,WAAW,CAACmB,KAAZ,CAAkBZ,IAAlB,EAAwBa,IAAxB,CAA6B,SAAAC,IAAI,CAAE,CAC/BC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAD+B,GAEvBG,CAAAA,eAFuB,CAESH,IAFT,CAEvBG,eAFuB,CAEPjB,IAFO,CAESc,IAFT,CAEPd,IAFO,CAEFE,OAFE,CAESY,IAFT,CAEFZ,OAFE,CAG/B,GAAGe,eAAH,CAAmB,CACfb,WAAW,CAACH,OAAZ,CAAoBD,IAApB,EACAI,WAAW,CAACc,kBAAZ,CAA+BD,eAA/B,EACApB,KAAK,CAACsB,OAAN,CAAcC,IAAd,CAAmB,YAAnB,EACH,CAJD,IAMIjB,CAAAA,UAAU,CAACD,OAAD,CAAV,CACP,CAVD,EAWH,CAbD,CAiBA,mBACI,2BAAK,KAAK,CAAC,UAAX,eACI,4BAAM,QAAQ,CAAEQ,QAAhB,eACI,+CADJ,cAEI,6BAAO,OAAO,CAAC,UAAf,CAA0B,SAAS,CAAC,SAApC,eAFJ,cAGI,6BAAO,IAAI,CAAC,MAAZ,CACO,IAAI,CAAC,UADZ,CAEO,QAAQ,CAAEL,QAFjB,CAGO,SAAS,CAAC,cAHjB,CAIO,WAAW,CAAC,gBAJnB,EAHJ,cAQI,6BAAO,OAAO,CAAC,UAAf,CAA0B,SAAS,CAAC,SAApC,eARJ,cASI,6BAAO,IAAI,CAAC,UAAZ,CACO,IAAI,CAAC,UADZ,CAEO,QAAQ,CAAEA,QAFjB,CAGO,SAAS,CAAC,cAHjB,CAIO,WAAW,CAAC,gBAJnB,EATJ,cAcI,8BAAQ,SAAS,CAAC,kCAAlB,CACQ,IAAI,CAAC,QADb,YAdJ,CADJ,CAkBKH,OAAO,cAAG,oBAAC,OAAD,EAAS,OAAO,CAAEA,OAAlB,EAAH,CAAkC,IAlB9C,CADJ,CAsBH,CAhDD,CAkDA,cAAeN,CAAAA,KAAf","sourcesContent":["import React, {useState,useContext} from 'react';\r\nimport AuthService from '../Services/AuthService';\r\n import Message from '../Components/Message';\r\nimport {AuthContext} from '../Context/AuthContext';\r\n\r\nconst Login = props=>{\r\n    const [user,setUser] = useState({username: \"\", password : \"\"});\r\n    const [message,setMessage] = useState(null);\r\n    const authContext = useContext(AuthContext);\r\n\r\n    const onChange = e =>{\r\n        setUser({...user,[e.target.name] : e.target.value});\r\n    }\r\n\r\n    const onSubmit = e =>{\r\n        e.preventDefault();\r\n        AuthService.login(user).then(data=>{\r\n            console.log(data);\r\n            const { isAuthenticated,user,message} = data;\r\n            if(isAuthenticated){\r\n                authContext.setUser(user);\r\n                authContext.setIsAuthenticated(isAuthenticated);\r\n                props.history.push('/registerd');\r\n            }\r\n            else\r\n                setMessage(message);\r\n        });\r\n    }\r\n\r\n\r\n\r\n    return(\r\n        <div class=\"register\">\r\n            <form onSubmit={onSubmit}>\r\n                <h3>Please sign in</h3>\r\n                <label htmlFor=\"username\" className=\"sr-only\">Username: </label>\r\n                <input type=\"text\" \r\n                       name=\"username\" \r\n                       onChange={onChange} \r\n                       className=\"form-control\" \r\n                       placeholder=\"Enter Username\"/>\r\n                <label htmlFor=\"password\" className=\"sr-only\">Password: </label>\r\n                <input type=\"password\" \r\n                       name=\"password\" \r\n                       onChange={onChange} \r\n                       className=\"form-control\" \r\n                       placeholder=\"Enter Password\"/>\r\n                <button className=\"btn btn-lg btn-primary btn-block\" \r\n                        type=\"submit\">Log in </button>\r\n            </form>\r\n            {message ? <Message message={message}/> : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}