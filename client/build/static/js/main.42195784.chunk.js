(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,a){e.exports=a(31)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),s=a.n(l),c=a(3),o=function(e){return console.log(e),fetch("/user/login",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{isAuthenticated:!1,user:{username:"",role:""}}}))},m=function(e){return console.log(e),fetch("/user/register",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))},u=function(){return fetch("/user/logout").then((function(e){return e.json()})).then((function(e){return e}))},i=function(){return fetch("/user/authenticated").then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{isAuthenticated:!1,user:{username:"",role:""}}}))},b=a(7),p=Object(n.createContext)(),E=function(e){var t=e.children,a=Object(n.useState)(null),l=Object(b.a)(a,2),s=l[0],c=l[1],o=Object(n.useState)(!1),m=Object(b.a)(o,2),u=m[0],E=m[1],g=Object(n.useState)(!1),d=Object(b.a)(g,2),h=d[0],f=d[1];return Object(n.useEffect)((function(){i().then((function(e){c(e.user),E(e.isAuthenticated),f(!0)}))}),[]),r.a.createElement("div",null,h?r.a.createElement(p.Provider,{value:{user:s,setUser:c,isAuthenticated:u,setIsAuthenticated:E}},t):r.a.createElement("h1",null,"Loading"))},g=function(e){var t=Object(n.useContext)(p),a=t.isAuthenticated,l=t.user,s=t.setIsAuthenticated,o=t.setUser,m=function(){u().then((function(e){e.sucess&&(o(e.user),s(!1))}))};return r.a.createElement("nav",{className:"navbar   navbar-expand-lg navbar-light bg-light"},r.a.createElement(c.b,{to:"/"},r.a.createElement("img",{width:"130px",height:"70px",src:"http://challedu.com/wp-content/uploads/2018/11/logo-new.jpg",alt:"logo"})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{to:"/"},r.a.createElement("li",{className:"nav-item nav-link"},"HOME")),r.a.createElement(c.b,{to:"/profile"},r.a.createElement("li",{className:"nav-item nav-link"},"My profile")),"admin"===l.role?r.a.createElement(c.b,{to:"/admin"},r.a.createElement("li",{className:"nav-item nav-link"},"admin")):null,r.a.createElement("button",{type:"button",className:"btn btn-link nav-item nav-link",onClick:m},"Log out")):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{to:"/"},r.a.createElement("li",{className:"nav-item nav-link"},"HOME")),r.a.createElement(c.b,{to:"/login"},r.a.createElement("li",{className:"nav-item nav-link"},"LOGIN")),r.a.createElement(c.b,{to:"/register"},r.a.createElement("li",{className:"nav-item nav-link"},"REGISTER"))))))},d=a(1),h=(a(29),function(){return r.a.createElement("div",{className:"   test d-flex flex-row justify-content-center align-items-center"},r.a.createElement("div",{className:" welcome text-center   "},r.a.createElement("h1",{className:"text"},"Welcome message"),r.a.createElement(c.b,{to:"/login"},r.a.createElement("button",{type:"button",className:"  mx-4 btn btn-primary rounded-pill"},"log in")),r.a.createElement(c.b,{to:"/register"},r.a.createElement("button",{type:"button",className:" mx-4 btn btn-primary rounded-pill"},"Register"))))}),f=a(9),v=a(10),j=function(e){var t="alert ";return e.message.msgError?t+="alert-danger":t+="alert-primary",t+" text-center"},y=function(e){return r.a.createElement("div",{className:j(e),role:"alert"},e.message.msgBody)},N=function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(b.a)(t,2),l=a[0],s=a[1],c=Object(n.useState)(null),m=Object(b.a)(c,2),u=m[0],i=m[1],E=Object(n.useContext)(p),g=function(e){s(Object(v.a)(Object(v.a)({},l),{},Object(f.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{class:"register"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),o(l).then((function(t){console.log(t);var a=t.isAuthenticated,n=t.user,r=t.message;a?(E.setUser(n),E.setIsAuthenticated(a),e.history.push("/registerd")):i(r)}))}},r.a.createElement("h3",null,"Please sign in"),r.a.createElement("label",{htmlFor:"username",className:"sr-only"},"Username: "),r.a.createElement("input",{type:"text",name:"username",onChange:g,className:"form-control",placeholder:"Enter Username"}),r.a.createElement("label",{htmlFor:"password",className:"sr-only"},"Password: "),r.a.createElement("input",{type:"password",name:"password",onChange:g,className:"form-control",placeholder:"Enter Password"}),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit"},"Log in ")),u?r.a.createElement(y,{message:u}):null)},O=function(e){var t=Object(n.useState)({username:"",password:"",role:""}),a=Object(b.a)(t,2),l=a[0],s=a[1],c=Object(n.useState)(null),o=Object(b.a)(c,2),u=o[0],i=o[1],p=Object(n.useRef)(null);Object(n.useEffect)((function(){return function(){clearTimeout(p)}}),[]);var E=function(e){s(Object(v.a)(Object(v.a)({},l),{},Object(f.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{class:"register"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),m(l).then((function(t){var a=t.message;i(a),s({username:"",password:"",role:""}),a.msgError||(p=setTimeout((function(){e.history.push("/login")}),2e3))}))}},r.a.createElement("h3",null,"Please Register"),r.a.createElement("label",{htmlFor:"username",className:"sr-only"},"Username: "),r.a.createElement("input",{type:"text",name:"username",value:l.username,onChange:E,className:"form-control",placeholder:"Enter Username"}),r.a.createElement("label",{htmlFor:"password",className:"sr-only"},"Password: "),r.a.createElement("input",{type:"password",name:"password",value:l.password,onChange:E,className:"form-control",placeholder:"Enter Password"}),r.a.createElement("label",{htmlFor:"role",className:"sr-only"},"Role: "),r.a.createElement("input",{type:"text",name:"role",value:l.role,onChange:E,className:"form-control",placeholder:"Enter role (admin/user/ngo)"}),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit"},"Register")),u?r.a.createElement(y,{message:u}):null)};a(30);var x=function(){return r.a.createElement(c.a,null,r.a.createElement(d.a,{exact:!0,path:"/",component:h}),r.a.createElement(d.a,{exact:!0,path:"/login",component:N}),r.a.createElement(d.a,{exact:!0,path:"/register",component:O}),r.a.createElement(d.a,{exact:!0,path:"/registerd",component:g}))};s.a.render(r.a.createElement(E,null,r.a.createElement(x,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.42195784.chunk.js.map