{"version":3,"sources":["Services/AuthService.js","Context/AuthContext.js","Components/Navbar.js","Components/Home.js","Components/Message.js","Components/Login.js","Components/Register.js","App.js","index.js"],"names":["user","console","log","fetch","method","body","JSON","stringify","headers","then","res","status","json","data","isAuthenticated","username","role","AuthContext","createContext","children","useState","setUser","setIsAuthenticated","isLoaded","setIsLoaded","useEffect","AuthService","Provider","value","Navbar","props","useContext","onClickLogoutHandler","sucess","className","to","width","height","src","alt","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","onClick","Home","getStyle","baseClass","message","msgError","Message","msgBody","Login","password","setMessage","authContext","onChange","e","target","name","class","onSubmit","preventDefault","history","push","htmlFor","placeholder","Register","timerID","useRef","clearTimeout","setTimeout","App","exact","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.42195784.chunk.js","sourcesContent":["export default {\r\n    login : user =>{\r\n        console.log(user);\r\n        return fetch('/user/login',{\r\n            method : \"post\",\r\n            body : JSON.stringify(user),\r\n            headers : {\r\n                'Content-Type' : 'application/json'\r\n            }\r\n        }).then(res => {\r\n            if(res.status !== 401)\r\n                return res.json().then(data => data);\r\n            else\r\n                return { isAuthenticated : false, user : {username : \"\",role : \"\"}};\r\n        })\r\n    },\r\n    register : user =>{\r\n        console.log(user);\r\n        return fetch('/user/register',{\r\n            method : \"post\",\r\n            body : JSON.stringify(user),\r\n            headers : {\r\n                'Content-Type' : 'application/json'\r\n            }\r\n        }).then(res => res.json())\r\n          .then(data => data);\r\n    },\r\n    logout : ()=>{\r\n        return fetch('/user/logout')\r\n                .then(res => res.json())\r\n                .then(data => data);\r\n    },\r\n    isAuthenticated : ()=>{\r\n        return fetch('/user/authenticated')\r\n                .then(res=>{\r\n                    if(res.status !== 401)\r\n                        return res.json().then(data => data);\r\n                    else\r\n                        return { isAuthenticated : false, user : {username : \"\",role : \"\"}};\r\n                });\r\n    }\r\n\r\n}","\r\n  \r\nimport React, {createContext,useState,useEffect} from 'react';\r\nimport AuthService from '../Services/AuthService';\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport default ({ children })=>{\r\n    const [user,setUser] = useState(null);\r\n    const [isAuthenticated,setIsAuthenticated] = useState(false);\r\n    const [isLoaded,setIsLoaded] = useState(false);\r\n\r\n    useEffect(()=>{\r\n        AuthService.isAuthenticated().then(data =>{\r\n            setUser(data.user);\r\n            setIsAuthenticated(data.isAuthenticated);\r\n            setIsLoaded(true);\r\n        });\r\n    },[]);\r\n\r\n    return (\r\n        <div>\r\n            {!isLoaded ? <h1>Loading</h1> : \r\n            <AuthContext.Provider value={{user,setUser,isAuthenticated,setIsAuthenticated}}>\r\n                { children }\r\n            </AuthContext.Provider>}\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React, {useContext} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport AuthService from \"../Services/AuthService\";\r\nimport {AuthContext} from \"../Context/AuthContext\";\r\n\r\nconst Navbar = props =>{\r\n    const{isAuthenticated, user, setIsAuthenticated, setUser} = useContext(AuthContext);\r\n    const onClickLogoutHandler= ()=>{\r\n        AuthService.logout().then(data=>{\r\n           if (data.sucess){\r\n               setUser(data.user);\r\n               setIsAuthenticated(false);\r\n           } \r\n        });\r\n    }\r\n    const unauntheticatedNavBar = ()=>{\r\n        return (\r\n        <> \r\n        <Link to=\"/\">\r\n            <li className=\"nav-item nav-link\">HOME</li>\r\n        </Link>\r\n        <Link to=\"/login\">\r\n            <li className=\"nav-item nav-link\">LOGIN</li>\r\n        </Link>\r\n        <Link to=\"/register\">\r\n            <li className=\"nav-item nav-link\">REGISTER</li>\r\n        </Link>\r\n        \r\n        \r\n        </>\r\n     )\r\n    }\r\n    const auntheticatedNavBar = ()=>{\r\n        return (\r\n        <> \r\n            <Link to=\"/\">\r\n                <li className=\"nav-item nav-link\">HOME</li>\r\n            </Link>\r\n            <Link to=\"/profile\">\r\n                <li className=\"nav-item nav-link\">My profile</li>\r\n            </Link>\r\n           \r\n            {\r\n                user.role === \"admin\" ?\r\n                <Link to=\"/admin\">\r\n                <li className=\"nav-item nav-link\">admin</li>\r\n            </Link> : null\r\n            }\r\n         \r\n        <button type = \"button\" className=\"btn btn-link nav-item nav-link\" \r\n        onClick = {onClickLogoutHandler}>Log out</button>\r\n        \r\n        </>\r\n     )\r\n    }\r\n\r\n\r\n\r\nreturn(\r\n<nav className=\"navbar   navbar-expand-lg navbar-light bg-light\">\r\n    <Link to =\"/\">\r\n    <img width=\"130px\" height=\"70px\"src=\"http://challedu.com/wp-content/uploads/2018/11/logo-new.jpg\" alt=\"logo\"/>\r\n        \r\n    </Link>\r\n<button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarText\" aria-controls=\"navbarText\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n  <span className=\"navbar-toggler-icon\"></span>\r\n</button>\r\n<div className=\"collapse navbar-collapse\" id=\"navbarText\">\r\n  <ul className=\"navbar-nav mr-auto\">\r\n    {  !isAuthenticated ? unauntheticatedNavBar(): auntheticatedNavBar()}\r\n  </ul>\r\n</div>\r\n</nav>)\r\n}\r\n\r\nexport default Navbar;","import React from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport \"../index.css\"\r\n\r\nconst Home = () =>{\r\n    return(\r\n<div className=\"   test d-flex flex-row justify-content-center align-items-center\">\r\n    <div className=\" welcome text-center   \">\r\n        <h1 className=\"text\" >Welcome message</h1>\r\n        <Link to=\"/login\">\r\n        <button type=\"button\" className=\"  mx-4 btn btn-primary rounded-pill\">log in</button>\r\n        </Link>\r\n        <Link to=\"/register\">\r\n        <button type=\"button\" className=\" mx-4 btn btn-primary rounded-pill\">Register</button>\r\n        </Link>\r\n    </div>\r\n</div>\r\n    )}\r\n\r\nexport default Home","import React from 'react'\r\n\r\n\r\nconst getStyle = (props)=>{\r\n    let baseClass = \"alert \";\r\n    if(props.message.msgError)\r\n        baseClass = baseClass + \"alert-danger\";\r\n    else\r\n        baseClass = baseClass + \"alert-primary\";\r\n    return baseClass + \" text-center\";\r\n}\r\n\r\nconst Message = props=>{\r\n    return(\r\n        <div className={getStyle(props)} role=\"alert\">\r\n            {props.message.msgBody}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message;","import React, {useState,useContext} from 'react';\r\nimport AuthService from '../Services/AuthService';\r\n import Message from '../Components/Message';\r\nimport {AuthContext} from '../Context/AuthContext';\r\n\r\nconst Login = props=>{\r\n    const [user,setUser] = useState({username: \"\", password : \"\"});\r\n    const [message,setMessage] = useState(null);\r\n    const authContext = useContext(AuthContext);\r\n\r\n    const onChange = e =>{\r\n        setUser({...user,[e.target.name] : e.target.value});\r\n    }\r\n\r\n    const onSubmit = e =>{\r\n        e.preventDefault();\r\n        AuthService.login(user).then(data=>{\r\n            console.log(data);\r\n            const { isAuthenticated,user,message} = data;\r\n            if(isAuthenticated){\r\n                authContext.setUser(user);\r\n                authContext.setIsAuthenticated(isAuthenticated);\r\n                props.history.push('/registerd');\r\n            }\r\n            else\r\n                setMessage(message);\r\n        });\r\n    }\r\n\r\n\r\n\r\n    return(\r\n        <div class=\"register\">\r\n            <form onSubmit={onSubmit}>\r\n                <h3>Please sign in</h3>\r\n                <label htmlFor=\"username\" className=\"sr-only\">Username: </label>\r\n                <input type=\"text\" \r\n                       name=\"username\" \r\n                       onChange={onChange} \r\n                       className=\"form-control\" \r\n                       placeholder=\"Enter Username\"/>\r\n                <label htmlFor=\"password\" className=\"sr-only\">Password: </label>\r\n                <input type=\"password\" \r\n                       name=\"password\" \r\n                       onChange={onChange} \r\n                       className=\"form-control\" \r\n                       placeholder=\"Enter Password\"/>\r\n                <button className=\"btn btn-lg btn-primary btn-block\" \r\n                        type=\"submit\">Log in </button>\r\n            </form>\r\n            {message ? <Message message={message}/> : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;","import React, {useState,useRef,useEffect} from 'react';\r\nimport AuthService from '../Services/AuthService';\r\nimport Message from '../Components/Message';\r\n\r\nconst Register = props=>{\r\n    const [user,setUser] = useState({username: \"\", password : \"\", role : \"\"});\r\n    const [message,setMessage] = useState(null);\r\n    let timerID = useRef(null);\r\n\r\n    useEffect(()=>{\r\n        return ()=>{\r\n            clearTimeout(timerID);\r\n        }\r\n    },[]);\r\n\r\n    const onChange = e =>{\r\n        setUser({...user,[e.target.name] : e.target.value});\r\n    }\r\n\r\n    const resetForm = ()=>{\r\n        setUser({username : \"\", password : \"\",role : \"\"});\r\n    }\r\n\r\n    const onSubmit = e =>{\r\n        e.preventDefault();\r\n        AuthService.register(user).then(data=>{\r\n            const { message } = data;\r\n            setMessage(message);\r\n            resetForm();\r\n            if(!message.msgError){\r\n                timerID = setTimeout(()=>{\r\n                    props.history.push('/login');\r\n                },2000)\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    return(\r\n        <div class=\"register\">\r\n            <form onSubmit={onSubmit}>\r\n                <h3>Please Register</h3>\r\n                <label htmlFor=\"username\" className=\"sr-only\">Username: </label>\r\n                <input type=\"text\" \r\n                       name=\"username\" \r\n                       value={user.username}\r\n                       onChange={onChange} \r\n                       className=\"form-control\" \r\n                       placeholder=\"Enter Username\"/>\r\n                <label htmlFor=\"password\" className=\"sr-only\">Password: </label>\r\n                <input type=\"password\" \r\n                       name=\"password\"\r\n                       value={user.password} \r\n                       onChange={onChange} \r\n                       className=\"form-control\" \r\n                       placeholder=\"Enter Password\"/>\r\n                <label htmlFor=\"role\" className=\"sr-only\">Role: </label>\r\n                <input type=\"text\" \r\n                       name=\"role\"\r\n                       value={user.role}  \r\n                       onChange={onChange} \r\n                       className=\"form-control\" \r\n                       placeholder=\"Enter role (admin/user/ngo)\"/>\r\n                <button className=\"btn btn-lg btn-primary btn-block\" \r\n                        type=\"submit\">Register</button>\r\n            </form>\r\n            {message ? <Message message={message}/> : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Register;","import React from 'react';\nimport Navbar from \"./Components/Navbar\";\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\nimport Home from \"./Components/Home\";\nimport Login from \"./Components/Login\";\nimport Register from \"./Components/Register\";\n\nimport './App.css';\nfunction App() {\n  \n  return (\n    <Router>\n      \n      <Route exact path = \"/\" component = {Home}/>\n      <Route exact path = \"/login\" component = {Login}/>\n      <Route exact path = \"/register\" component = {Register}/>\n      <Route exact path = \"/registerd\" component = {Navbar}/>\n      \n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport AuthProvider from './Context/AuthContext';\n\nReactDOM.render(<AuthProvider><App /></AuthProvider>, document.getElementById('root'));"],"sourceRoot":""}